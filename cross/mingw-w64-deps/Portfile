# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$
PortSystem          1.0

set _arch           x86_64    
set _name           deps 
set _prefix         mingw-w64
set crossgcc-target ${_arch}-w64-mingw32
set _sysroot        ${prefix}/${crossgcc-target}

name                ${_arch}-${_prefix}-${_name}
version             3.1.0
categories          cross devel
maintainers         openmaintainer

description         Binutils for ${_arch}-${_prefix} cross development
long_description    ${_prefix} development toolchain ("binutils") \
                    for ${_arch}-${_prefix} (Windows) cross development.
homepage            http://www.gnu.org/software/binutils/
license             gpl

platforms           darwin

depends_lib         port:gettext \
                    port:gmp \
                    port:mpfr \
                    port:libmpc \
                    port:isl \
                    port:cloog

fetch               {}

checksum            {}

use_configure       no

build               {}

destroot.violate_mtree  yes
destroot            {
    file mkdir ${destroot}/${_sysroot}/include
    file mkdir ${destroot}/${_sysroot}/lib
    
    foreach f [list gmp gmpxx mpfr mpf2mpfr mpc] {
        system "cd  ${destroot}/${_sysroot}/include && ln -s ../../include/${f}.h ${f}.h"        
    }

   system "cd  ${destroot}/${_sysroot}/include && ln -s ../../include/isl isl"
   system "cd  ${destroot}/${_sysroot}/include && ln -s ../../include/cloog cloog"

    foreach f [list gmp gmpxx mpfr mpc libisl cloog-isl] {
        system "cd  ${destroot}/${_sysroot}/lib && ln -s ../../lib/lib${f}.dylib lib${f}.dylib"        
        system "cd  ${destroot}/${_sysroot}/lib && ln -s ../../lib/lib${f}.a lib${f}.a"        
    }
}





