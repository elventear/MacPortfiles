# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$
PortSystem          1.0

set _arch           x86_64    
set _name           headers 
set _prefix         mingw-w64
set crossgcc-target ${_arch}-w64-mingw32

name                ${_arch}-${_prefix}-${_name}
version             3.1.0
categories          cross devel
maintainers         openmaintainer

description         Binutils for ${_arch}-${_prefix} cross development
long_description    ${_prefix} development toolchain ("binutils") \
                    for ${_arch}-${_prefix} (Windows) cross development.
homepage            http://www.gnu.org/software/binutils/
license             gpl

platforms           darwin

master_sites        sourceforge:project/${_prefix}/${_prefix}/${_prefix}-release/
distfiles           ${_prefix}-v${version}.tar.bz2
worksrcdir          ${_prefix}-v${version}
use_bzip2           yes

checksums           rmd160 647e86a10b928bc3eb17270dabf708947638e629 \
                    sha256 ece7a7e7e1ab5e25d5ce469f8e4de7223696146fffa71c16e2a9b017d0e017d2

pre-configure       { system "cd ${workpath} && mkdir -p build"}
configure.dir       ${workpath}/build
configure.cmd       ${worksrcpath}/${_prefix}-${_name}/configure
configure.args      --enable-sdk=all --host=${crossgcc-target} \
                    --program-prefix=${crossgcc-target}- --prefix=${prefix}/${crossgcc-target}
if {${os.platform} eq "darwin" && ${build_arch} ne ""} {
    configure.args-append --build=${build_arch}-apple-darwin${os.major}
}

build.dir           ${workpath}/build

destroot.violate_mtree  yes

